# Project3 OVERVIEW
- 물리 메모리는 한정되어 있지만, 많은 프로세스들은 물리 메모리를 사용하고 싶어하고 물리 메모리는 모든 프로세스의 페이지가 사용할 만큼 크지 않다.
- 만약에 페이지가 물리 메모리를 필요로 하지 않으면 페이지 아웃된다.
  - 페이지 아웃 : 물리적 메모리의 공간이 부족할 때 사용하지 않는 메모리 페이지를 하드 디스크의 스왑 공간으로 내보내는 작업
  - 최근에 사용하지 않았거나 덜 중요한 페이지를 선택해서 스왑 공간으로 내보낸다. (어떤 페이지가 안 중요하냐의 기준: 페이지 교체 알고리즘)
  - 스왑 공간 : 디스크의 일부를 사용해서 임시로 데이터를 보관하는 공
- 프로세스가 페이지를 필요로하고 물리 메모리에 없을 때. 페이지 인 되어야 한다.
  - 페이지 인 : 페이지 아웃되었었던 페이지가 다시 필요해지면 해당 페이지를 스왑 영역에서 물리적 메모리로 불러오는 과정 이 과정에서 페이지 폴트가 발생해서 시스템이 페이지를 다시 읽어오게 된다.
  - 페이지 폴트 : 프로그램이 메모리에 있는 데이터를 읽으려고 했는데 그 페이지가 페이지 아웃되어서 메모리에 없기 때문에 페이지 폴트가 발생함. 그러면 운영체제가 해당 페이지를 다시 메모리로 로드한다.

to do
--------
- supplemental page table (SPT) : 페이지 테이블 보충 자료 구조, 페이지가 파일에서 로드되었는지 스왑 영역에서 관리되는지 등을 추적
- 물리적 프레임 관리 : 물리 메모리의 개별 블록 (페이지)
- 페이지 폴트 핸들러 수정 (lazy loading) : 메모리 페이지를 프로그램이 실제로 필요할 때까지 로드하지 않는 방법
  - 페이지 폴트가 발생하면 그때 파일에서 읽어오거나 스왑에서 가져오는 방식으로 메모리를 로드하도록 수정 (stack growth, file-mapped memory 등)
    - stack growth : 프로그램이 더 많은 스택 메모리를 필요로 하면, 페이지 폴트가 발생하면서 스택 영역이 커지게 된다.
    - file-mapped Memory : 파일의 내용을 메모리에 매핑해서 직접 읽거나 쓸 수 있도록 하는 기술, 큰 파일을 열었을 때 한 번에 모두 메모리에 로드하는 대신 필요한 부분만 메모리에 로드하는 방식으로 처리 (이때도 페이지 폴트 발생)
- mmap, munmap : 파일을 메모리에 매핑하여 파일 내용을 직접 메모리에서 읽거나 쓸 수 있게해주는 시스템 콜과 메모리에 매핑한 파일을 해제해주는 함수
- swap in/out : 페이지를 스왑 영역에 저장했다가 가져오는 과정

Terminology
-----------
페이지 : 가상 메모리에서 연속된 메모리 영역, 프로그램이 사용하는 주소 공간을 작은 단위로 나눈 것
프레임 : 물리 메모리에서 연속된 메모리 영역, 페이지가 실제로 로드될 수 있는 메모리 블록 (페이지가 프레임에 매핑된다)
페이지 테이블 : 가상 주소를 물리 주소로 변환하기 위한 데이터 구조 (페이지를 프레임에 매핑하는 역할)
Eviction (페이지 교체) : 프레임(메모리)에서 페이지를 제거하는 과정 페이지를 스왑 테이블이나 파일 시스템에 저장한다. (메모리가 부족할 때 주로 발생한다.)
스왑 테이블 : 프레임에서 제거된 페이지가 기록되는 공간 스왑 파티션에 위치하며 나중에 페이지를 다시 로드할 때 사용된다.

+ 파일이 메모리에 매핑된다?
  - 파일의 내용을 메모리 주소 공간에 직접 연결해서 프로세스가 파일 데이터를 메모리에 있는 것 처럼 읽고 쓸 수 있도록 하는 과정 (mmap으로 구현한다)
  - 
  
자료구조 구현할 때 포함 할 내용
---------------
1. SPT : 각 프로세스마다 가상 메모리 페이지의 추가 정보를 관리 (페이지의 데이터가 위치하는 곳 -ex: 스왑공간, 디스크 등, 해당 페이지가 매핑된 커널 가상 주소에 대한 포인터, 페이지의 활성 상태 등)
2. 프레임 테이블 : 물리 메모리의 프레임을 추적하는 전역적인 데이터 구조, 할당 가능한 프레임이랑 비어있는 프레임 기록하고 각 프레임이 어느 프로세스의 어느 페이지랑 연결 되어있는지도 저장)
3. 스왑 테이블 : 스왑 공간에서의 페이지 위치를 추적하는 구조, 스왑 아웃된 페이지 스왑 인 할 때, 스왑 테이블을 통해 페이지의 위치를 찾아 로드
4. 파일 매핑 테이블 : 파일이 메모리에 매핑된 상태를 추적하는 데이터 구조, 어떤 파일이 어떤 가상 페이지에 매핑되어 있는지 

# 무한한 메모리의 환상
운영체제와 하드웨어가 협력해서 메모리가 무한한 것처럼 보이게 하는 환상을 제공하는 것
물리적 메모리가 한정되어 있어도, 가상 메모리 시스템을 통해서 프로그램이 필요로하는 메모리가 물리적 메모리를 초과해도 처리할 수 있게 된다.
: 페이지 아웃, 페이지 인을 통해 구현 -> 효율적이고 메모리 확장적이지만 디스크 접근 속도는 메모리보다 훨씬 느리기 때문에 성능이 크게 저하된다. (스레싱) (디스크 I/O 증가)

# 페이지 교체 알고리즘
FIFO : 가장 오래된 페이지를 페이지 아웃
LRU : 가장 최근에 사용되지 않은 페이지를 페이지 아웃
LFU : 사용 빈도가 가장 적은 페이지를 페이지 아웃
