# 과제 설명서 project 1: Threads

최소의 기능을 하는 커널 스레드 기능을 확장해가면서 synchronization 문제들을 이해하는 것이 목표 -> 멀티스레딩 기능 구현 <br>
우리가 다루게 될 커널 스레드들은 한 프로세스 내에서 모두 같은 메모리 공간을 공유하게 되기 때문에 코드, 데이터, 힙을 포함한 메모리 공간을 공유하게 되기 때문에 동기화와 컨텍스트 스위칭이 아주 중요하다.

## 인터럽트 비활성화 
https://yjohdev.notion.site/APPENDIX-a91e89d4887f4109a17bf8bfb0834cc8#d5f731022d134e20baf13f91fe9e197c
가장 단순하게 동기화를 하는 것 -> 인터럽트를 불가능하게 하는 것 인터럽트 신호를 무시해서 실행 흐름이 중단되지 않고 실행 중인 코드가 외부 신호에 의해 방해받지 않게된다.
pintos는 선점 가능한 커널임 -> 더 명시적인 동기화가 필요하다.

근데, 우리가 인터럽트 상태를 지정해줄 필요는 별로 없다
-> 왜냐하면 동기화 함수를 사용하면 인터럽트 처리와 관련된 부분도 알아서 처리하기 때문에

인터럽트를 비활성화 하는 이유: 커널 스레드(운영체제 내부에서 실행되는 코드 블록)와 외부 인터럽트 핸들러 (외부 하드웨어 - 키보드, 타이머 등) 사이의 동기화 문제 해결하려고
외부 인터럽트 핸들러는 짧은 시간 안에 처리를 끝내야하고 운영체제가 이 핸들러 흐름을 제어할 수 없음 -> 인터럽트 핸들러가 실행될 때 다른 스레드랑 자원을 공유하는 경우 그 자원을 보호하기 위해서 인터럽트를 비활성화 해서
외부 인터럽트 핸들러가 자원을 건드리지 않도록 막는 것

마스크 불가능 인터럽트 (NMIs) : 인터럽트 비활성화로도 막을 수 없는 외부 인터럽트 -> 핀토스에서는 사용 X

인터럽트 활성화, 비활성화 자료형과 함수들 위치 : include/threds/interrupt.h

## 세마포어
비음수 정수 값을 갖는 두 변수 : 두 개의 연산자로 원자적으로 조작할 수 있다
P : 값이 양수가 되기를 기다렸다가 양수가 되면 감소 시킴
V : 값을 증가시킴 (그리고 P 연산에서 wait 중인 쓰레드가 있다면 하나를 깨운다.)

## 락
초기값을 1로 하는 세마포어와 같다. up은 락에서의 release와 같고 down은 acquire와 같다.

## 모니터

과제 제공 : 쓰레드 생성, 쓰레드 종료, 쓰레드 간의 스위
