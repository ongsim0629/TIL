# 26. Concurrency and Threads
멀티 스레드 프로그램은 하나 이상의 실행 지점을 가지고 있다.
멀티 스레드 프로그램에서 실행하고자 하는 스레드는 반드시 문맥 교환을 통해서 실행 중인 스레드와 교체되어야 한다.
이 과정에서 주소 공간을 그대로 사용한다. => 사용하고 있던 페이지 테이블 그대로

스레드 제어 블록 (TCB) : 프로세스 스레드들의 상태를 저장하기 위한 블록

멀리 스레드 프로세스 같은 경우는 주소 공간에 하나의 스택이 아니라 스레드마다 스택이 할당되어 있다. (스레드 로컬 저장소)

```
#include <stdio.h>
2 #include <assert.h>
3 #include <pthread.h>
4
5 void *mythread(void *arg) {
6 printf(“%s\n ”, (char *) arg);
7 return NULL;
8 }
9
10 int
11 main(int argc, char *argv[]) {
12 pthread_t p1, p2;
13 int rc;
14 printf(“main: begin\n ”);
15 rc = pthread_create(&p1, NULL, mythread, “A ”);
16 assert(rc &=& 0);
17 rc = pthread_create(&p2, NULL, mythread, “B ”);
18 assert(rc &=& 0);
19 // 종료할 수 있도록 대기 중인 스레드 병합하기
20 rc = pthread_join(p1, NULL); assert(rc &=& 0);
21 rc = pthread_join(p2, NULL); assert(rc &=& 0);
22 printf(“main: end\n ”);
23 return 0;
24 }
```
스케줄러가 특정 시점에 실행하는 스레드에 따라 다양한 순서가 존재하게 된다.
먼저 생성되었다고 해서 먼저 실행될 것이라는 가정을 할 이유가 없다.
생성된 스레드는 호출자와는 별개로 실행된다.




